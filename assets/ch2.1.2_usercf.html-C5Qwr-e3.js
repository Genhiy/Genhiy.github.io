import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as l,c as t,a as s,d as a,e}from"./app-SD3SAAIy.js";const m={},p=s("h2",{id:"基本思想",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#基本思想"},[s("span",null,"基本思想")])],-1),i=s("p",null,"基于用户的协同过滤（UserCF）：",-1),c=s("ul",null,[s("li",null,[a("例如，我们要对用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A")]),s("annotation",{encoding:"application/x-tex"},"A")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"A")])])]),a(" 进行物品推荐，可以先找到和他有相似兴趣的其他用户。")]),s("li",null,[a("然后，将共同兴趣用户喜欢的，但用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A")]),s("annotation",{encoding:"application/x-tex"},"A")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"A")])])]),a(" 未交互过的物品推荐给 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A")]),s("annotation",{encoding:"application/x-tex"},"A")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"A")])])]),a("。")])],-1),r=e('<img src="http://ryluo.oss-cn-chengdu.aliyuncs.com/图片image-20210629232540289.png" alt="image-20210629232540289" style="zoom:80%;"><h2 id="计算过程" tabindex="-1"><a class="header-anchor" href="#计算过程"><span>计算过程</span></a></h2><p>以下图为例，给用户推荐物品的过程可以形象化为一个猜测用户对物品进行打分的任务，表格里面是5个用户对于5件物品的一个打分情况，就可以理解为用户对物品的喜欢程度。</p><figure><img src="http://ryluo.oss-cn-chengdu.aliyuncs.com/图片image-20210629232622758.png" alt="image-20210629232622758" tabindex="0" loading="lazy"><figcaption>image-20210629232622758</figcaption></figure><p>UserCF算法的两个步骤：</p><ul><li><p>首先，根据前面的这些打分情况（或者说已有的用户向量）计算一下 Alice 和用户1， 2， 3， 4的相似程度， 找出与 Alice 最相似的 n 个用户。</p></li><li><p>根据这 n 个用户对物品 5 的评分情况和与 Alice 的相似程度会猜测出 Alice 对物品5的评分。如果评分比较高的话， 就把物品5推荐给用户 Alice， 否则不推荐。</p></li></ul><h3 id="主要步骤" tabindex="-1"><a class="header-anchor" href="#主要步骤"><span>主要步骤</span></a></h3>',7),o=s("ol",null,[s("li",null,[s("p",null,"计算用户之间的相似度"),s("ul",null,[s("li",null,[a("根据之前介绍的几种方法，我们可以计算出各用户之间的相似程度。对于用户Alice，选取出与其最相近的 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"N")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),a(" 个用户。")])])]),s("li",null,[s("p",null,"计算用户对新物品的评分预测"),s("ul",null,[s("li",null,[s("p",null,"常用的方式之一：利用目标用户与相似用户之间的相似度以及相似用户对物品的评分，来预测目标用户对候选物品的评分估计："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"p")])]),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",{mathvariant:"normal"},"s"),s("mo",null,"∈"),s("mi",null,"S")])]),s("mrow",null,[s("mo",{fence:"true"},"("),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"s")])]),s("mo",null,"⋅"),s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",{mathvariant:"normal"},"s"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"p")])]),s("mo",{fence:"true"},")")])]),s("mrow",null,[s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",{mathvariant:"normal"},"s"),s("mo",null,"∈"),s("mi",null,"S")])]),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"s")])])])])]),s("annotation",{encoding:"application/x-tex"}," R_{\\mathrm{u}, \\mathrm{p}}=\\frac{\\sum_{\\mathrm{s} \\in S}\\left(w_{\\mathrm{u}, \\mathrm{s}} \\cdot R_{\\mathrm{s}, \\mathrm{p}}\\right)}{\\sum_{\\mathrm{s} \\in S} w_{\\mathrm{u}, \\mathrm{s}}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.4802em","vertical-align":"-1.0131em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.4671em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"s"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.7171em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"s"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},"("),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"s"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},")")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.0131em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])]),s("ul",null,[s("li",null,[a("其中，权重 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",null,"u"),s("mo",{separator:"true"},","),s("mi",null,"s")])])]),s("annotation",{encoding:"application/x-tex"},"w_{u,s}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7167em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),a(" 是用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"u")]),s("annotation",{encoding:"application/x-tex"},"u")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"u")])])]),a(" 和用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s")]),s("annotation",{encoding:"application/x-tex"},"s")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"s")])])]),a(" 的相似度， "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",null,"s"),s("mo",{separator:"true"},","),s("mi",null,"p")])])]),s("annotation",{encoding:"application/x-tex"},"R_{s,p}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])])]),a(" 是用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s")]),s("annotation",{encoding:"application/x-tex"},"s")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"s")])])]),a(" 对物品 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"p")]),s("annotation",{encoding:"application/x-tex"},"p")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal"},"p")])])]),a(" 的评分。")])])]),s("li",null,[s("p",null,"另一种方式：考虑到用户评分的偏置，即有的用户喜欢打高分， 有的用户喜欢打低分的情况。公式如下："),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"p")])]),s("mo",null,"="),s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"R"),s("mo",null,"ˉ")]),s("mi",null,"u")]),s("mo",null,"+"),s("mfrac",null,[s("mrow",null,[s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",{mathvariant:"normal"},"s"),s("mo",null,"∈"),s("mi",null,"S")])]),s("mrow",null,[s("mo",{fence:"true"},"("),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"s")])]),s("mo",null,"⋅"),s("mrow",null,[s("mo",{fence:"true"},"("),s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",null,"s"),s("mo",{separator:"true"},","),s("mi",null,"p")])]),s("mo",null,"−"),s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"R"),s("mo",null,"ˉ")]),s("mi",null,"s")]),s("mo",{fence:"true"},")")]),s("mo",{fence:"true"},")")])]),s("mrow",null,[s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",{mathvariant:"normal"},"s"),s("mo",null,"∈"),s("mi",null,"S")])]),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",{mathvariant:"normal"},"u"),s("mo",{separator:"true"},","),s("mi",{mathvariant:"normal"},"s")])])])])]),s("annotation",{encoding:"application/x-tex"}," R_{\\mathrm{u}, \\mathrm{p}}=\\bar{R}_{u} + \\frac{\\sum_{\\mathrm{s} \\in S}\\left(w_{\\mathrm{u}, \\mathrm{s}} \\cdot \\left(R_{s, p}-\\bar{R}_{s}\\right)\\right)}{\\sum_{\\mathrm{s} \\in S} w_{\\mathrm{u}, \\mathrm{s}}} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9701em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8201em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")]),s("span",{style:{top:"-3.2523em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"ˉ")])])])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"u")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.6031em","vertical-align":"-1.0131em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.59em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"s"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.74em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"s"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.05764em"}},"S")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},"(")]),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathrm mtight"},"u"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathrm mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"⋅"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},"(")]),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"p")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8201em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")]),s("span",{style:{top:"-3.2523em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"ˉ")])])])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},")")])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},")")])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.0131em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])]),s("ul",null,[s("li",null,[a("其中，"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"R"),s("mo",null,"ˉ")]),s("mi",null,"s")])]),s("annotation",{encoding:"application/x-tex"},"\\bar{R}_{s}")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9701em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8201em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")]),s("span",{style:{top:"-3.2523em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"ˉ")])])])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"s")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])])])])]),a(" 表示用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"s")]),s("annotation",{encoding:"application/x-tex"},"s")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"s")])])]),a(" 对物品的历史平均评分。")])])])])]),s("li",null,[s("p",null,[a("对用户进行物品推荐：在获得用户 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"u")]),s("annotation",{encoding:"application/x-tex"},"u")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"u")])])]),a(" 对不同物品的评价预测后， 最终的推荐列表根据预测评分进行排序得到。")])])],-1),u=s("h3",{id:"手动计算",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#手动计算"},[s("span",null,"手动计算")])],-1),h=s("p",null,"根据上面的问题， 下面手动计算 Alice 对物品 5 的得分：",-1),g=s("ol",null,[s("li",null,[s("p",null,[s("strong",null,"计算 Alice 与其他用户的相似度（基于皮尔逊相关系数）")]),s("ul",null,[s("li",null,"手动计算 Alice 与用户 1 之间的相似度：")]),s("blockquote",null,[s("ul",null,[s("li",null,[s("p",null,"用户向量:"),s("ul",null,[s("li",null,[s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"Alice"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"5"),s("mo",{separator:"true"},","),s("mn",null,"3"),s("mo",{separator:"true"},","),s("mn",null,"4"),s("mo",{separator:"true"},","),s("mn",null,"4"),s("mo",{stretchy:"false"},")"),s("mo",{separator:"true"},","),s("mtext",null,"user1"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"3"),s("mo",{separator:"true"},","),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mn",null,"2"),s("mo",{separator:"true"},","),s("mn",null,"3"),s("mo",{stretchy:"false"},")"),s("mo",{separator:"true"},","),s("mtext",null,"user2"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"4"),s("mo",{separator:"true"},","),s("mn",null,"3"),s("mo",{separator:"true"},","),s("mn",null,"4"),s("mo",{separator:"true"},","),s("mn",null,"3"),s("mo",{stretchy:"false"},")"),s("mo",{separator:"true"},","),s("mtext",null,"user3"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"3"),s("mo",{separator:"true"},","),s("mn",null,"3"),s("mo",{separator:"true"},","),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mn",null,"5"),s("mo",{stretchy:"false"},")"),s("mo",{separator:"true"},","),s("mtext",null,"user4"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mn",null,"5"),s("mo",{separator:"true"},","),s("mn",null,"5"),s("mo",{separator:"true"},","),s("mn",null,"2"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"}," \\text {Alice}:(5,3,4,4), \\text{user1}:(3,1,2,3) , \\text {user2}:(4,3,4,3) , \\text {user3}:(3,3,1,5) , \\text {user4}:(1,5,5,2) ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"Alice")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"5"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mclose"},")"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"user1")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"3"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"2"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mclose"},")"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"user2")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"4"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mclose"},")"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"user3")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"3"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"5"),s("span",{class:"mclose"},")"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"user4")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"5"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"5"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"2"),s("span",{class:"mclose"},")")])])])])])])])]),s("li",null,[s("p",null,"计算Alice与user1的余弦相似性:"),s("ul",null,[s("li",null,[s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"sim"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"("),s("mtext",null," Alice, user1 "),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mi",null,"cos"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"("),s("mtext",null," Alice, user "),s("mn",null,"1"),s("mo",{stretchy:"false"},")"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mn",null,"15"),s("mo",null,"+"),s("mn",null,"3"),s("mo",null,"+"),s("mn",null,"8"),s("mo",null,"+"),s("mn",null,"12")]),s("mrow",null,[s("mi",{mathvariant:"normal"},"sqrt"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"("),s("mn",null,"25"),s("mo",null,"+"),s("mn",null,"9"),s("mo",null,"+"),s("mn",null,"16"),s("mo",null,"+"),s("mn",null,"16"),s("mo",{stretchy:"false"},")"),s("mo",null,"∗"),s("mi",{mathvariant:"normal"},"sqrt"),s("mo",null,"⁡"),s("mo",{stretchy:"false"},"("),s("mn",null,"9"),s("mo",null,"+"),s("mn",null,"1"),s("mo",null,"+"),s("mn",null,"4"),s("mo",null,"+"),s("mn",null,"9"),s("mo",{stretchy:"false"},")")])]),s("mo",null,"="),s("mn",null,"0.975")]),s("annotation",{encoding:"application/x-tex"}," \\operatorname{sim}(\\text { Alice, user1 })=\\cos (\\text { Alice, user } 1)=\\frac{15+3+8+12}{\\operatorname{sqrt}(25+9+16+16) * \\operatorname{sqrt}(9+1+4+9)}=0.975 ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},[s("span",{class:"mord mathrm"},"sim")]),s("span",{class:"mopen"},"("),s("span",{class:"mord text"},[s("span",{class:"mord"}," Alice, user1 ")]),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mop"},"cos"),s("span",{class:"mopen"},"("),s("span",{class:"mord text"},[s("span",{class:"mord"}," Alice, user ")]),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.2574em","vertical-align":"-0.936em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mord mathrm"},"sqrt")]),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"25"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"9"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"16"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"16"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"∗"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mop"},[s("span",{class:"mord mathrm"},"sqrt")]),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"9"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"9"),s("span",{class:"mclose"},")")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"15"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"3"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"8"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"12")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.936em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"0.975")])])])])])])])]),s("li",null,[s("p",null,"计算Alice与user1皮尔逊相关系数:"),s("ul",null,[s("li",null,[s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"e"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"a"),s("mi",null,"v"),s("mi",null,"e"),s("mo",null,"="),s("mn",null,"4"),s("mspace",{width:"1em"}),s("mi",null,"u"),s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"r"),s("mn",null,"1"),s("mi",{mathvariant:"normal"},"_"),s("mi",null,"a"),s("mi",null,"v"),s("mi",null,"e"),s("mo",null,"="),s("mn",null,"2.25")]),s("annotation",{encoding:"application/x-tex"}," Alice\\_ave =4 \\quad user1\\_ave =2.25 ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1.0044em","vertical-align":"-0.31em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"ce"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"_"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9544em","vertical-align":"-0.31em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mspace",style:{"margin-right":"1em"}}),s("span",{class:"mord mathnormal"},"u"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"ser"),s("span",{class:"mord",style:{"margin-right":"0.02778em"}},"1_"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"v"),s("span",{class:"mord mathnormal"},"e"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"2.25")])])])])])]),s("li",null,[a("向量减去均值: "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mtext",null,"Alice"),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mo",null,"−"),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mn",null,"0"),s("mo",{stretchy:"false"},")"),s("mspace",{width:"1em"}),s("mtext",null," user1 "),s("mo",null,":"),s("mo",{stretchy:"false"},"("),s("mn",null,"0.75"),s("mo",{separator:"true"},","),s("mo",null,"−"),s("mn",null,"1.25"),s("mo",{separator:"true"},","),s("mo",null,"−"),s("mn",null,"0.25"),s("mo",{separator:"true"},","),s("mn",null,"0.75"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"\\text {Alice}:(1,-1, 0,0)\\quad \\text { user1 }:(0.75,-1.25,-0.25,0.75)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"},"Alice")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"−"),s("span",{class:"mord"},"1"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"0"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"1em"}}),s("span",{class:"mord text"},[s("span",{class:"mord"}," user1 ")]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},":"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"0.75"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"−"),s("span",{class:"mord"},"1.25"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"−"),s("span",{class:"mord"},"0.25"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"0.75"),s("span",{class:"mclose"},")")])])])])])]),s("li",null,[s("p",null,"计算这俩新向量的余弦相似度和上面计算过程一致, 结果是 0.852 。")])])]),s("ul",null,[s("li",null,[s("p",null,"基于 sklearn 计算所有用户之间的皮尔逊相关系数。可以看出，与 Alice 相似度最高的用户为用户1和用户2。"),s("img",{src:"http://ryluo.oss-cn-chengdu.aliyuncs.com/JavaWJkjP2fHH27Rajrj.png!thumbnail",alt:"图片",style:{zoom:"80%"}})])])]),s("li",null,[s("p",null,[s("strong",null,"根据相似度用户计算 Alice对物品5的最终得分")]),s("p",null,"用户1对物品5的评分是3， 用户2对物品5的打分是5， 那么根据上面的计算公式， 可以计算出 Alice 对物品5的最终得分是:"),s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("msub",null,[s("mi",null,"P"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mtext",null,"物品"),s("mn",null,"5")])]),s("mo",null,"="),s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"R"),s("mo",null,"ˉ")]),s("mrow",null,[s("mi",null,"A"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"e")])]),s("mo",null,"+"),s("mfrac",null,[s("mrow",null,[s("munderover",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",null,"k"),s("mo",null,"="),s("mn",null,"1")]),s("mn",null,"2")]),s("mrow",null,[s("mo",{fence:"true"},"("),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"u"),s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"r"),s("mi",null,"k")])]),s("mrow",null,[s("mo",{fence:"true"},"("),s("msub",null,[s("mi",null,"R"),s("mrow",null,[s("mi",null,"u"),s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"r"),s("mi",null,"k"),s("mo",{separator:"true"},","),s("mtext",null,"物品"),s("mn",null,"5")])]),s("mo",null,"−"),s("msub",null,[s("mover",{accent:"true"},[s("mi",null,"R"),s("mo",null,"ˉ")]),s("mrow",null,[s("mi",null,"u"),s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"r"),s("mi",null,"k")])]),s("mo",{fence:"true"},")")]),s("mo",{fence:"true"},")")])]),s("mrow",null,[s("munderover",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",null,"k"),s("mo",null,"="),s("mn",null,"1")]),s("mn",null,"2")]),s("msub",null,[s("mi",null,"w"),s("mrow",null,[s("mi",null,"A"),s("mi",null,"l"),s("mi",null,"i"),s("mi",null,"c"),s("mi",null,"e"),s("mo",{separator:"true"},","),s("mi",null,"u"),s("mi",null,"s"),s("mi",null,"e"),s("mi",null,"r"),s("mi",null,"k")])])])]),s("mo",null,"="),s("mn",null,"4"),s("mo",null,"+"),s("mfrac",null,[s("mrow",null,[s("mn",null,"0.85"),s("mo",null,"∗"),s("mo",{stretchy:"false"},"("),s("mn",null,"3"),s("mo",null,"−"),s("mn",null,"2.4"),s("mo",{stretchy:"false"},")"),s("mo",null,"+"),s("mn",null,"0.7"),s("mo",null,"∗"),s("mo",{stretchy:"false"},"("),s("mn",null,"5"),s("mo",null,"−"),s("mn",null,"3.8"),s("mo",{stretchy:"false"},")")]),s("mrow",null,[s("mn",null,"0.85"),s("mo",null,"+"),s("mn",null,"0.7")])]),s("mo",null,"="),s("mn",null,"4.87")]),s("annotation",{encoding:"application/x-tex"}," P_{Alice, \\text{物品}5}=\\bar{R}_{Alice}+\\frac{\\sum_{k=1}^{2}\\left(w_{Alice,user k}\\left(R_{userk, \\text{物品}5}-\\bar{R}_{userk}\\right)\\right)}{\\sum_{k=1}^{2} w_{Alice, userk}}=4+\\frac{0.85*(3-2.4)+0.7*(5-3.8)}{0.85+0.7}=4.87 ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9694em","vertical-align":"-0.2861em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.1389em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"ce"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord text mtight"},[s("span",{class:"mord cjk_fallback mtight"},"物品")]),s("span",{class:"mord mtight"},"5")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.9701em","vertical-align":"-0.15em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8201em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")]),s("span",{style:{top:"-3.2523em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"ˉ")])])])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"ce")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.8377em","vertical-align":"-1.1437em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.694em"}},[s("span",{style:{top:"-2.156em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.954em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])]),s("span",{style:{top:"-3.2029em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"2")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2997em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"ce"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"ser"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.74em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.954em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k"),s("span",{class:"mrel mtight"},"="),s("span",{class:"mord mtight"},"1")])])]),s("span",{style:{top:"-3.2029em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"2")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2997em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},"(")]),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02691em"}},"w"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0269em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"A"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.01968em"}},"l"),s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mord mathnormal mtight"},"ce"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"ser"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},"(")]),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"ser"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord text mtight"},[s("span",{class:"mord cjk_fallback mtight"},"物品")]),s("span",{class:"mord mtight"},"5")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.2861em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mord accent"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8201em"}},[s("span",{style:{top:"-3em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R")]),s("span",{style:{top:"-3.2523em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"accent-body",style:{left:"-0.1667em"}},[s("span",{class:"mord"},"ˉ")])])])])])]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3361em"}},[s("span",{style:{top:"-2.55em","margin-left":"-0.0077em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"u"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"ser"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.03148em"}},"k")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},")")])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},[s("span",{class:"delimsizing size1"},")")])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.1437em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},"4"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1963em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.427em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"0.85"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"0.7")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"0.85"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"∗"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"3"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"2.4"),s("span",{class:"mclose"},")"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"0.7"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"∗"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"5"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"3.8"),s("span",{class:"mclose"},")")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"4.87")])])])])]),s("ul",null,[s("li",null,"同样方式，可以计算用户 Alice 对其他物品的评分预测。")])]),s("li",null,[s("p",null,[s("strong",null,"根据用户评分对用户进行推荐")]),s("ul",null,[s("li",null,"根据 Alice 的打分对物品排个序从大到小：$$物品1>物品5>物品3=物品4>物品2$$。"),s("li",null,"如果要向 Alice 推荐2款产品的话， 我们就可以推荐物品 1 和物品 5 给 Alice。")])])],-1),d=s("p",null,"至此， 基于用户的协同过滤算法原理介绍完毕。",-1),y=s("h2",{id:"usercf编程实现",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#usercf编程实现"},[s("span",null,"UserCF编程实现")])],-1),k=s("ol",null,[s("li",null,[s("p",null,"建立实验使用的数据表："),s("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[s("pre",{class:"language-python"},[s("code",null,[s("span",{class:"token keyword"},"import"),a(" numpy "),s("span",{class:"token keyword"},"as"),a(` np
`),s("span",{class:"token keyword"},"import"),a(" pandas "),s("span",{class:"token keyword"},"as"),a(` pd


`),s("span",{class:"token keyword"},"def"),a(),s("span",{class:"token function"},"loadData"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},":"),a(`
    users `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'Alice'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'A'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'B'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'C'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'D'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(`
             `),s("span",{class:"token string"},"'user1'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'A'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'B'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'C'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'D'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'E'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(`
             `),s("span",{class:"token string"},"'user2'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'A'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'B'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'C'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'D'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'E'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(`
             `),s("span",{class:"token string"},"'user3'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'A'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'B'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'C'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'D'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'E'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"4"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),a(`
             `),s("span",{class:"token string"},"'user4'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token punctuation"},"{"),s("span",{class:"token string"},"'A'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'B'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'C'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"5"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'D'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token string"},"'E'"),s("span",{class:"token punctuation"},":"),a(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},"}"),a(`
             `),s("span",{class:"token punctuation"},"}"),a(`
    `),s("span",{class:"token keyword"},"return"),a(` users
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("ul",null,[s("li",null,[a("这里使用字典来建立用户-物品的交互表。 "),s("ul",null,[s("li",null,[a("字典"),s("code",null,"users"),a("的键表示不同用户的名字，值为一个评分字典，评分字典的键值对表示某物品被当前用户的评分。")]),s("li",null,"由于现实场景中，用户对物品的评分比较稀疏。如果直接使用矩阵进行存储，会存在大量空缺值，故此处使用了字典。")])])])]),s("li",null,[s("p",null,"计算用户相似性矩阵"),s("ul",null,[s("li",null,[a("由于训练数据中共包含 5 个用户，所以这里的用户相似度矩阵的维度也为 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mn",null,"5"),s("mo",null,"×"),s("mn",null,"5")]),s("annotation",{encoding:"application/x-tex"},"5 \\times 5")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7278em","vertical-align":"-0.0833em"}}),s("span",{class:"mord"},"5"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6444em"}}),s("span",{class:"mord"},"5")])])]),a("。")])]),s("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[s("pre",{class:"language-python"},[s("code",null,[a("user_data "),s("span",{class:"token operator"},"="),a(" loadData"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(`
similarity_matrix `),s("span",{class:"token operator"},"="),a(" pd"),s("span",{class:"token punctuation"},"."),a("DataFrame"),s("span",{class:"token punctuation"},"("),a(`
    np`),s("span",{class:"token punctuation"},"."),a("identity"),s("span",{class:"token punctuation"},"("),s("span",{class:"token builtin"},"len"),s("span",{class:"token punctuation"},"("),a("user_data"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},","),a(`
    index`),s("span",{class:"token operator"},"="),a("user_data"),s("span",{class:"token punctuation"},"."),a("keys"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},","),a(`
    columns`),s("span",{class:"token operator"},"="),a("user_data"),s("span",{class:"token punctuation"},"."),a("keys"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},","),a(`
`),s("span",{class:"token punctuation"},")"),a(`

`),s("span",{class:"token comment"},"# 遍历每条用户-物品评分数据"),a(`
`),s("span",{class:"token keyword"},"for"),a(" u1"),s("span",{class:"token punctuation"},","),a(" items1 "),s("span",{class:"token keyword"},"in"),a(" user_data"),s("span",{class:"token punctuation"},"."),a("items"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},":"),a(`
    `),s("span",{class:"token keyword"},"for"),a(" u2"),s("span",{class:"token punctuation"},","),a(" items2 "),s("span",{class:"token keyword"},"in"),a(" user_data"),s("span",{class:"token punctuation"},"."),a("items"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},":"),a(`
        `),s("span",{class:"token keyword"},"if"),a(" u1 "),s("span",{class:"token operator"},"=="),a(" u2"),s("span",{class:"token punctuation"},":"),a(`
            `),s("span",{class:"token keyword"},"continue"),a(`
        vec1`),s("span",{class:"token punctuation"},","),a(" vec2 "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token punctuation"},"["),s("span",{class:"token punctuation"},"]"),a(`
        `),s("span",{class:"token keyword"},"for"),a(" item"),s("span",{class:"token punctuation"},","),a(" rating1 "),s("span",{class:"token keyword"},"in"),a(" items1"),s("span",{class:"token punctuation"},"."),a("items"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},":"),a(`
            rating2 `),s("span",{class:"token operator"},"="),a(" items2"),s("span",{class:"token punctuation"},"."),a("get"),s("span",{class:"token punctuation"},"("),a("item"),s("span",{class:"token punctuation"},","),a(),s("span",{class:"token operator"},"-"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},")"),a(`
            `),s("span",{class:"token keyword"},"if"),a(" rating2 "),s("span",{class:"token operator"},"=="),a(),s("span",{class:"token operator"},"-"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},":"),a(`
                `),s("span",{class:"token keyword"},"continue"),a(`
            vec1`),s("span",{class:"token punctuation"},"."),a("append"),s("span",{class:"token punctuation"},"("),a("rating1"),s("span",{class:"token punctuation"},")"),a(`
            vec2`),s("span",{class:"token punctuation"},"."),a("append"),s("span",{class:"token punctuation"},"("),a("rating2"),s("span",{class:"token punctuation"},")"),a(`
        `),s("span",{class:"token comment"},"# 计算不同用户之间的皮尔逊相关系数"),a(`
        similarity_matrix`),s("span",{class:"token punctuation"},"["),a("u1"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"["),a("u2"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},"="),a(" np"),s("span",{class:"token punctuation"},"."),a("corrcoef"),s("span",{class:"token punctuation"},"("),a("vec1"),s("span",{class:"token punctuation"},","),a(" vec2"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"0"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},"]"),a(`

`),s("span",{class:"token keyword"},"print"),s("span",{class:"token punctuation"},"("),a("similarity_matrix"),s("span",{class:"token punctuation"},")"),a(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[s("pre",{class:"language-text"},[s("code",null,`          1         2         3         4         5
1  1.000000  0.852803  0.707107  0.000000 -0.792118
2  0.852803  1.000000  0.467707  0.489956 -0.900149
3  0.707107  0.467707  1.000000 -0.161165 -0.466569
4  0.000000  0.489956 -0.161165  1.000000 -0.641503
5 -0.792118 -0.900149 -0.466569 -0.641503  1.000000
`)]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])])]),s("li",null,[s("p",null,[a("计算与 Alice 最相似的 "),s("code",null,"num"),a(" 个用户")]),s("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[s("pre",{class:"language-python"},[s("code",null,[a("target_user "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"' Alice '"),a(`
num `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"2"),a(`
`),s("span",{class:"token comment"},"# 由于最相似的用户为自己，去除本身"),a(`
sim_users `),s("span",{class:"token operator"},"="),a(" similarity_matrix"),s("span",{class:"token punctuation"},"["),a("target_user"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),a("sort_values"),s("span",{class:"token punctuation"},"("),a("ascending"),s("span",{class:"token operator"},"="),s("span",{class:"token boolean"},"False"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},"["),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},":"),a("num"),s("span",{class:"token operator"},"+"),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),a("index"),s("span",{class:"token punctuation"},"."),a("tolist"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),a(`
`),s("span",{class:"token keyword"},"print"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string-interpolation"},[s("span",{class:"token string"},"f'与用户"),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("target_user"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"最相似的"),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("num"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"个用户为："),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("sim_users"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"'")]),s("span",{class:"token punctuation"},")"),a(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[s("pre",{class:"language-text"},[s("code",null,`与用户 Alice 最相似的2个用户为：['user1', 'user2']
`)]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])])]),s("li",null,[s("p",null,[a("预测用户 Alice 对物品 "),s("code",null,"E"),a(" 的评分")]),s("div",{class:"language-python line-numbers-mode","data-ext":"py","data-title":"py"},[s("pre",{class:"language-python"},[s("code",null,[a("weighted_scores "),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0."),a(`
corr_values_sum `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token number"},"0."),a(`

target_item `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token string"},"'E'"),a(`
`),s("span",{class:"token comment"},"# 基于皮尔逊相关系数预测用户评分"),a(`
`),s("span",{class:"token keyword"},"for"),a(" user "),s("span",{class:"token keyword"},"in"),a(" sim_users"),s("span",{class:"token punctuation"},":"),a(`
    corr_value `),s("span",{class:"token operator"},"="),a(" similarity_matrix"),s("span",{class:"token punctuation"},"["),a("target_user"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"["),a("user"),s("span",{class:"token punctuation"},"]"),a(`
    user_mean_rating `),s("span",{class:"token operator"},"="),a(" np"),s("span",{class:"token punctuation"},"."),a("mean"),s("span",{class:"token punctuation"},"("),s("span",{class:"token builtin"},"list"),s("span",{class:"token punctuation"},"("),a("user_data"),s("span",{class:"token punctuation"},"["),a("user"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),a("values"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),a(`

    weighted_scores `),s("span",{class:"token operator"},"+="),a(" corr_value "),s("span",{class:"token operator"},"*"),a(),s("span",{class:"token punctuation"},"("),a("user_data"),s("span",{class:"token punctuation"},"["),a("user"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"["),a("target_item"),s("span",{class:"token punctuation"},"]"),a(),s("span",{class:"token operator"},"-"),a(" user_mean_rating"),s("span",{class:"token punctuation"},")"),a(`
    corr_values_sum `),s("span",{class:"token operator"},"+="),a(` corr_value

target_user_mean_rating `),s("span",{class:"token operator"},"="),a(" np"),s("span",{class:"token punctuation"},"."),a("mean"),s("span",{class:"token punctuation"},"("),s("span",{class:"token builtin"},"list"),s("span",{class:"token punctuation"},"("),a("user_data"),s("span",{class:"token punctuation"},"["),a("target_user"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},"."),a("values"),s("span",{class:"token punctuation"},"("),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),s("span",{class:"token punctuation"},")"),a(`
target_item_pred `),s("span",{class:"token operator"},"="),a(" target_user_mean_rating "),s("span",{class:"token operator"},"+"),a(" weighted_scores "),s("span",{class:"token operator"},"/"),a(` corr_values_sum
`),s("span",{class:"token keyword"},"print"),s("span",{class:"token punctuation"},"("),s("span",{class:"token string-interpolation"},[s("span",{class:"token string"},"f'用户"),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("target_user"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"对物品"),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("target_item"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"的预测评分为："),s("span",{class:"token interpolation"},[s("span",{class:"token punctuation"},"{"),a("target_item_pred"),s("span",{class:"token punctuation"},"}")]),s("span",{class:"token string"},"'")]),s("span",{class:"token punctuation"},")"),a(`
`)])]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"}),s("div",{class:"line-number"})])]),s("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[s("pre",{class:"language-text"},[s("code",null,`用户 Alice 对物品E的预测评分为：4.871979899370592
`)]),s("div",{class:"line-numbers","aria-hidden":"true"},[s("div",{class:"line-number"})])])])],-1),v=s("h2",{id:"usercf优缺点",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#usercf优缺点"},[s("span",null,"UserCF优缺点")])],-1),b=s("p",null,"User-based算法存在两个重大问题：",-1),x=s("ol",null,[s("li",null,[s("p",null,"数据稀疏性"),s("ul",null,[s("li",null,"一个大型的电子商务推荐系统一般有非常多的物品，用户可能买的其中不到1%的物品，不同用户之间买的物品重叠性较低，导致算法无法找到一个用户的邻居，即偏好相似的用户。"),s("li",null,"这导致UserCF不适用于那些正反馈获取较困难的应用场景(如酒店预订， 大件物品购买等低频应用)。")])]),s("li",null,[s("p",null,"算法扩展性"),s("ul",null,[s("li",null,[a("基于用户的协同过滤需要维护用户相似度矩阵以便快速的找出 "),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"T"),s("mi",null,"o"),s("mi",null,"p"),s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"TopN")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"T"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"pN")])])]),a(" 相似用户， 该矩阵的存储开销非常大，存储空间随着用户数量的增加而增加。")]),s("li",null,"故不适合用户数据量大的情况使用。")])])],-1),w=s("p",null,"由于UserCF技术上的两点缺陷，导致很多电商平台并没有采用这种算法，而是采用了ItemCF算法实现最初的推荐系统。",-1),f=[p,i,c,r,o,u,h,g,d,y,k,v,b,x,w];function _(z,M){return l(),t("div",null,f)}const L=n(m,[["render",_],["__file","ch2.1.2_usercf.html.vue"]]),C=JSON.parse('{"path":"/rcmd/ch02/ch2.1/ch2.1.2_usercf.html","title":"基于用户的协同过滤","lang":"zh-CN","frontmatter":{"date":"2024-06-06T00:00:00.000Z","title":"基于用户的协同过滤","shortTitle":"UserCF","author":"Genhiy","order":2,"category":["推荐系统"],"tag":["无标签"],"feed":false,"seo":false,"head":[]},"headers":[{"level":2,"title":"基本思想","slug":"基本思想","link":"#基本思想","children":[]},{"level":2,"title":"计算过程","slug":"计算过程","link":"#计算过程","children":[{"level":3,"title":"主要步骤","slug":"主要步骤","link":"#主要步骤","children":[]},{"level":3,"title":"手动计算","slug":"手动计算","link":"#手动计算","children":[]}]},{"level":2,"title":"UserCF编程实现","slug":"usercf编程实现","link":"#usercf编程实现","children":[]},{"level":2,"title":"UserCF优缺点","slug":"usercf优缺点","link":"#usercf优缺点","children":[]}],"git":{},"readingTime":{"minutes":6.49,"words":1948},"filePathRelative":"rcmd/ch02/ch2.1/ch2.1.2_usercf.md","localizedDate":"2024年6月6日"}');export{L as comp,C as data};
