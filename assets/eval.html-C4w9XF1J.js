import{_ as e}from"./Snipaste_2024-06-27_14-32-14-DE2oJBjS.js";import{_ as m}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as i,o as p,c as r,a as s,d as a,b as t,e as n}from"./app-SD3SAAIy.js";const c={},o=n('<h2 id="评价指标与损失函数的区别" tabindex="-1"><a class="header-anchor" href="#评价指标与损失函数的区别"><span>评价指标与损失函数的区别？</span></a></h2><p>当建立一个学习算法时，我们希望最大化一个给定的评价指标matric（比如说准确度），但算法在学习过程中会尝试优化一个不同的损失函数loss（比如说MSE/Cross-entropy）。</p><p>那为什么不把评价指标matric作为学习算法的损失函数loss呢？</p><ol><li><p>一般来说，应该尝试优化一个与你最关心的评价指标相对应的损失函数。</p><p>例如，在做分类时，我认为你需要给我一个很好的理由，让我不要优化交叉熵。但是，交叉熵并不是一个非常直观的指标，所以一旦你完成了训练，你可能还想知道你的分类准确率有多高，以了解你的模型是否真的能在现实世界中发挥作用。</p><p>总之，在每个epoch训练完后，你都会有多个评估指标。这样作的主要原因是为了了解你的模型在做什么。这意味着你想要最大化指标A，以便得到一个接近最大化指标B的解决方案。</p></li><li><p>通常情况下，MSE/交叉熵比精度更容易优化，因为它们对模型参数是可微的，在某些情况下甚至是凸的，这使得它更容易。</p><p>在可微的条件下，或许你还想要梯度更容易计算(交叉熵v.s.dice-coefficient或者IoU)。在语义分割的情况下使用交叉熵而不是dice或者类似的IoU指标，这是因为交叉熵的梯度更好。</p></li></ol><h2 id="分类问题离线指标" tabindex="-1"><a class="header-anchor" href="#分类问题离线指标"><span>分类问题离线指标</span></a></h2>',5),h={class:"hint-container tip"},g=s("p",{class:"hint-container-title"},"提示",-1),u={href:"https://zhuanlan.zhihu.com/p/115668303",target:"_blank",rel:"noopener noreferrer"},d=s("p",null,"常见分类问题评价指标的问题：",-1),y=s("ul",null,[s("li",null,"精确率、召回率、F1的局限：二分类时只能评估正类的分类性能，多分类时只能评估某一类的分类性能。"),s("li",null,"正确率、错误率的难点：对于二分类：正类和负类是相对的，对于多分类：如何选取阈值。")],-1),v=s("h3",{id:"auc",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#auc"},[s("span",null,"AUC")])],-1),_=s("p",null,"AUC（Area Under the ROC Curve），ROC曲线下的面积。ROC（Receiver Operating Characteristic）Curve，受试者工作特征曲线：不同分类阈值下的真正类率（TPR）和假正类率（FPR）构成的曲线。",-1),f=s("p",null,"AUC的定义：随机抽出一对样本（一个正样本、一个负样本），然后用训练得到的分类起来对这两个样本进行预测，预测得到的正样本的概率大于负样本的概率的概率。AUC考虑的是样本预测的排序质量。",-1),b=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mtable",{rowspacing:"0.25em",columnalign:"center",columnspacing:"0em"},[s("mtr",null,[s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"A"),s("mi",{mathvariant:"normal"},"U"),s("mi",{mathvariant:"normal"},"C")]),s("mo",{stretchy:"false"},"("),s("mi",null,"R"),s("msub",null,[s("mo",{stretchy:"false"},")"),s("mi",null,"n")]),s("mo",null,"="),s("mfrac",null,[s("mn",null,"1"),s("mrow",null,[s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"∣"),s("mo",{stretchy:"false"},"("),s("mi",null,"n"),s("mo",null,"−"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"∣"),s("mo",{stretchy:"false"},")")])]),s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",null,"r"),s("mo",null,"∈"),s("mi",null,"R")])]),s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("msup",null,[s("mi",null,"r"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),s("mo",null,"∈"),s("mo",{stretchy:"false"},"("),s("mo",{stretchy:"false"},"{"),s("mn",null,"1"),s("mo",{separator:"true"},","),s("mo",null,"…"),s("mo",{separator:"true"},","),s("mi",null,"n"),s("mo",{stretchy:"false"},"}"),s("mo",null,"∖"),s("mi",null,"R"),s("mo",{stretchy:"false"},")")])]),s("mi",null,"δ"),s("mrow",null,[s("mo",{fence:"true"},"("),s("mi",null,"r"),s("mo",null,"<"),s("msup",null,[s("mi",null,"r"),s("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),s("mo",{fence:"true"},")")])])])])]),s("mtr",null,[s("mtd",null,[s("mstyle",{scriptlevel:"0",displaystyle:"true"},[s("mrow",null,[s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"n"),s("mo",null,"−"),s("mfrac",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"∣"),s("mo",null,"−"),s("mn",null,"1")]),s("mn",null,"2")]),s("mo",null,"−"),s("mfrac",null,[s("mn",null,"1"),s("mrow",null,[s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"∣")])]),s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",null,"r"),s("mo",null,"∈"),s("mi",null,"R")])]),s("mi",null,"r")]),s("mrow",null,[s("mi",null,"n"),s("mo",null,"−"),s("mi",{mathvariant:"normal"},"∣"),s("mi",null,"R"),s("mi",{mathvariant:"normal"},"∣")])])])])])])]),s("annotation",{encoding:"application/x-tex"}," \\begin{gathered} \\mathrm{AUC}(R)_{n} =\\frac{1}{|R|(n-|R|)}\\sum_{r\\in R}\\sum_{r^{\\prime}\\in(\\{1,\\ldots,n\\}\\setminus R)}\\delta\\left(r<r^{\\prime}\\right) \\\\ =\\frac{n-\\frac{|R|-1}2-\\frac1{|R|}\\sum_{r\\in R}r}{n-|R|} \\end{gathered} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"6.2934em","vertical-align":"-2.8967em"}}),s("span",{class:"mord"},[s("span",{class:"mtable"},[s("span",{class:"col-align-c"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"3.3967em"}},[s("span",{style:{top:"-5.9953em"}},[s("span",{class:"pstrut",style:{height:"3.92em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},[s("span",{class:"mord mathrm"},"AUC")]),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mclose"},[s("span",{class:"mclose"},")"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1514em"}},[s("span",{style:{top:"-2.55em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"n")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3214em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord"},"∣"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord"},"∣"),s("span",{class:"mclose"},")")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"1")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.936em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop op-limits"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.05em"}},[s("span",{style:{top:"-1.8557em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R")])])]),s("span",{style:{top:"-3.05em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",null,[s("span",{class:"mop op-symbol large-op"},"∑")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3217em"}},[s("span")])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop op-limits"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.05em"}},[s("span",{style:{top:"-1.809em","margin-left":"0em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.6828em"}},[s("span",{style:{top:"-2.786em","margin-right":"0.0714em"}},[s("span",{class:"pstrut",style:{height:"2.5em"}}),s("span",{class:"sizing reset-size3 size1 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"′")])])])])])])])]),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mopen mtight"},"({"),s("span",{class:"mord mtight"},"1"),s("span",{class:"mpunct mtight"},","),s("span",{class:"minner mtight"},"…"),s("span",{class:"mpunct mtight"},","),s("span",{class:"mord mathnormal mtight"},"n"),s("span",{class:"mclose mtight"},"}"),s("span",{class:"mbin mtight"},"∖"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mclose mtight"},")")])])]),s("span",{style:{top:"-3.05em"}},[s("span",{class:"pstrut",style:{height:"3.05em"}}),s("span",null,[s("span",{class:"mop op-symbol large-op"},"∑")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.516em"}},[s("span")])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03785em"}},"δ"),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"minner"},[s("span",{class:"mopen delimcenter",style:{top:"0em"}},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"<"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8019em"}},[s("span",{style:{top:"-3.113em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"′")])])])])])])])]),s("span",{class:"mclose delimcenter",style:{top:"0em"}},")")])])]),s("span",{style:{top:"-2.2593em"}},[s("span",{class:"pstrut",style:{height:"3.92em"}}),s("span",{class:"mord"},[s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.92em"}},[s("span",{style:{top:"-2.324em"}},[s("span",{class:"pstrut",style:{height:"3.01em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"∣"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord"},"∣")])]),s("span",{style:{top:"-3.24em"}},[s("span",{class:"pstrut",style:{height:"3.01em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.92em"}},[s("span",{class:"pstrut",style:{height:"3.01em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.01em"}},[s("span",{style:{top:"-2.655em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"2")])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.485em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"∣"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight"},"∣"),s("span",{class:"mbin mtight"},"−"),s("span",{class:"mord mtight"},"1")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.345em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.8451em"}},[s("span",{style:{top:"-2.655em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"∣"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mtight"},"∣")])])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.394em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mtight"},"1")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.52em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord mathnormal mtight",style:{"margin-right":"0.00773em"}},"R")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.936em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"2.8967em"}},[s("span")])])])])])])])])])])],-1),z=s("p",null,"AUC的计算方法：",-1),x=s("p",null,[a("AUC为正样本得分大于负样本得分的概率，但是穷举正负样本对太复杂，可以先根据得分从小到大排序，然后找出每个正样本的排序位次。计算出每个位次下负样本的个数，就是该正样本得分大于负样本得分的次数，对次数进行累加就是所有正样本得分大于负样本得分的次数，除以"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"M"),s("mo",null,"×"),s("mi",null,"N")]),s("annotation",{encoding:"application/x-tex"},"M×N")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7667em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"M"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])])]),a("就是所有正样本得分大于负样本得分的概率，如下图所示：")],-1),w=s("figure",null,[s("img",{src:e,alt:"",tabindex:"0",loading:"lazy"}),s("figcaption")],-1),A=s("p",null,"所以最终AUC的公式为：",-1),k=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mi",null,"U"),s("mi",null,"C"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("munder",null,[s("mo",null,"∑"),s("mrow",null,[s("mi",null,"i"),s("mo",null,"∈"),s("mtext",null," 正样本 ")])]),s("msub",null,[s("mrow",null,[s("mi",{mathvariant:"normal"},"rank"),s("mo",null,"⁡")]),s("mi",null,"i")]),s("mo",null,"−"),s("mi",null,"M"),s("mo",{stretchy:"false"},"("),s("mi",null,"M"),s("mo",null,"+"),s("mn",null,"1"),s("mo",{stretchy:"false"},")"),s("mi",{mathvariant:"normal"},"/"),s("mn",null,"2")]),s("mrow",null,[s("mi",null,"M"),s("mo",null,"×"),s("mi",null,"N")])])]),s("annotation",{encoding:"application/x-tex"}," AUC=\\frac{\\sum_{i \\in \\text { 正样本 }} \\operatorname{rank}_{i}-M(M+1) / 2}{M \\times N} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"U"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.07153em"}},"C"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.2364em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.4671em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"M"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.7171em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mop"},[s("span",{class:"mop op-symbol small-op",style:{position:"relative",top:"0em"}},"∑"),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.1786em"}},[s("span",{style:{top:"-2.4003em","margin-left":"0em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"i"),s("span",{class:"mrel mtight"},"∈"),s("span",{class:"mord text mtight"},[s("span",{class:"mord mtight"}," "),s("span",{class:"mord cjk_fallback mtight"},"正样本"),s("span",{class:"mord mtight"}," ")])])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3271em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mop"},[s("span",{class:"mop"},[s("span",{class:"mord mathrm"},"rank")]),s("span",{class:"msupsub"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.3117em"}},[s("span",{style:{top:"-2.55em","margin-right":"0.05em"}},[s("span",{class:"pstrut",style:{height:"2.7em"}}),s("span",{class:"sizing reset-size6 size3 mtight"},[s("span",{class:"mord mtight"},[s("span",{class:"mord mathnormal mtight"},"i")])])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.15em"}},[s("span")])])])])]),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"−"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"M"),s("span",{class:"mopen"},"("),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"M"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},")"),s("span",{class:"mord"},"/2")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),C=s("p",null,"AUC有两个明显优势：一是体现相对的排序（例如0.9排在0.1前面和0.5排在0.1前面对他来说是一样的）；二是适用样本不均衡情况。",-1),R=s("p",null,"AUC也有三个劣势：",-1),M=s("ul",null,[s("li",null,"无法反应Top-N的效果；AUC反映的是相对有序效果，但不能反映Top-N的效果，实际上我们更关注头部，比如推荐、搜索、广告方面。"),s("li",null,"只反映了排序能力，关注的是概率值的相对大小，与阈值和概率值的绝对大小没有关系，没有反映预测精度；（简单说，如果对一个模型的点击率统一乘以2，AUC不会变化，但显然模型预测的值和真实值之间的offset扩大了。）"),s("li",null,"AUC只关注正负样本之间的排序，并不关心正样本内部，或者负样本内部的排序。这也体现了AUC的本质：任意个正样本的概率都大于负样本的概率的能力。")],-1),U=s("p",null,"门捷列夫说“没有测量，就没有科学”。",-1),B=s("p",null,"精确率、召回率、 F1、ROC、AUC就是机器学习中基础且应用广泛的测量评估方法。但它们都是一些常用的离线指标 ，像推荐系统、计算广告等这些跟业务紧密联系的业务，还需要线上评估指标，这时就要考虑A/B实验：",-1),N=s("h2",{id:"a-b实验",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#a-b实验"},[s("span",null,"A/B实验")])],-1),S={class:"hint-container tip"},E=s("p",{class:"hint-container-title"},"提示",-1),T={href:"https://zhuanlan.zhihu.com/p/346602966",target:"_blank",rel:"noopener noreferrer"},G=n('<h3 id="基本信息" tabindex="-1"><a class="header-anchor" href="#基本信息"><span>基本信息</span></a></h3><p>首先，什么是A/B测试？A/B测试是一种随机测试（试验），将两个不同的东西（A、B）进行假设比较。A/B测试也称对照试验（Controlled Experiments）、双盲试验（Double Blind Clinical Trial）。</p><ul><li>A/B测试的核心步骤：假设、检验。</li><li>A/B测试的流程：假设、抽样、检验、结论。</li><li>A/B测试的统计学基础：试验设计、抽样理论、假设检验。</li></ul><p>常见的A/B测试工具，它们的输入，输出都是什么？</p><ul><li>powerandsamplesize 输入是：样本量（Sample Size）、统计功效（Power）、显著性水平 （Type Ι error rate）。</li><li>字节跳动的 DataTester 输出是：置信区间（confidence interval）、p值（p-value）、检验灵敏度（MDE）。</li></ul><h3 id="统计学基础" tabindex="-1"><a class="header-anchor" href="#统计学基础"><span>统计学基础</span></a></h3>',6),P=s("ul",null,[s("li",null,[s("p",null,"大样本与小样本：大样本、小样本之间并不是以样本量大小来区分的，只要样本量固定条件下进行的统计推断、问题分析，不管样本量多大，都称为小样本问题。")]),s("li",null,[s("p",null,"Z分布：标准正态分布，又称为U分布，无论样本数据怎么变化，Z分布始终不变。")]),s("li",null,[s("p",null,"t分布：当N很大时，t分布类似于Z分布，一般来说，n=30时即近似等价于标准正态分布。")]),s("li",null,[s("p",null,[a("卡方分布：服从"),s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"N"),s("mo",{stretchy:"false"},"("),s("mn",null,"0"),s("mo",{separator:"true"},","),s("mn",null,"1"),s("mo",{stretchy:"false"},")")]),s("annotation",{encoding:"application/x-tex"},"N(0,1)")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"1em","vertical-align":"-0.25em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"N"),s("span",{class:"mopen"},"("),s("span",{class:"mord"},"0"),s("span",{class:"mpunct"},","),s("span",{class:"mspace",style:{"margin-right":"0.1667em"}}),s("span",{class:"mord"},"1"),s("span",{class:"mclose"},")")])])]),a("分布的样本的平方和所服从的分布。")])]),s("li",null,[s("p",null,"中心极限定理：习惯于把和的分布收敛于正态分布的那一类定理都叫做“中心极限定理”。")]),s("li",null,[s("p",null,"原假设与备择假设：原假设指实验之前原有的假设，备择假设指如果否定原假设，可备选择的假设。A/B实验中，原假设指AB组指标无显著差异，备择假设指AB组有显著差异。")]),s("li",null,[s("p",null,"第一、二类错误：第一类错误指实际上新策略无效，但实验显示有效；第二类错误指实际上新策略有效，但实验显示新策略无效。")]),s("li",null,[s("p",null,"显著性水平：显著性水平（significance level），使得犯第 Ι 类错误的概率控制在一给定的水平下，这个水平就是显著性水平，在此基础上使犯第 ΙΙ 类错误的概率尽可能小。")]),s("li",null,[s("p",null,"p值："),s("ul",null,[s("li",null,"定义1：p 值（probability value，p -value）在观测数据下拒绝原假设的最小显著性水平。"),s("li",null,"定义2：p 值是指拒绝原假设犯第 Ι 类错误的最小概率。"),s("li",null,"定义3：p 值代表观察到的随机因素产生的差异概率。")])]),s("li",null,[s("p",null,"统计功效（statistical power）：不犯第ΙΙ类错误（1-β）的概率。A/B实验中的统计功效：当AB两组差异真的存在时，能正确判断的概率。统计功效的影响因素：两总体差异（效应量）、显著性水平 α、样本量 n。但是，在这 3 个影响因素中，显著性水平 α 是提前给定，只有样本量 n 是可以控制的。")]),s("li",null,[s("p",null,"效应量（Effect Size，又称效应值），提供了对效应大小的具体测量。效应量的特征：不依赖样本量，不依赖测量尺度，效应量的正负号仅表示效应的方向，其绝对值才是实际的效应大小。")]),s("li",null,[s("p",null,"其他内容：置信区间、置信度。")])],-1),I=s("div",{class:"hint-container important"},[s("p",{class:"hint-container-title"},"重要"),s("p",null,"P值、置信区间、效应量是衡量试验结果的三个最重要的指标。")],-1);function O(L,Z){const l=i("ExternalLinkIcon");return p(),r("div",null,[o,s("div",h,[g,s("p",null,[a("本部分内容部分参考："),s("a",u,[a("知乎：F1、ROC、AUC的原理、公式推导、Python实现和应用"),t(l)])])]),d,y,v,_,f,b,z,x,w,A,k,C,R,M,U,B,N,s("div",S,[E,s("p",null,[a("本部分内容部分参考："),s("a",T,[a("知乎：A/B测试(AB实验)的基础、原理、公式推导、Python实现和应用"),t(l)])])]),G,P,I])}const j=m(c,[["render",O],["__file","eval.html.vue"]]),J=JSON.parse('{"path":"/zsk/ai/ai_base/eval.html","title":"评价指标总结","lang":"zh-CN","frontmatter":{"title":"评价指标总结","date":"2024-04-24T00:00:00.000Z","author":"Genhiy","order":6,"category":["AI"],"tag":["评价指标"],"description":"评价指标与损失函数的区别？ 当建立一个学习算法时，我们希望最大化一个给定的评价指标matric（比如说准确度），但算法在学习过程中会尝试优化一个不同的损失函数loss（比如说MSE/Cross-entropy）。 那为什么不把评价指标matric作为学习算法的损失函数loss呢？ 一般来说，应该尝试优化一个与你最关心的评价指标相对应的损失函数。 例如，...","head":[["meta",{"property":"og:url","content":"https://github.com/Genhiy/Genhiy.github.io/zsk/ai/ai_base/eval.html"}],["meta",{"property":"og:site_name","content":"Genhiy"}],["meta",{"property":"og:title","content":"评价指标总结"}],["meta",{"property":"og:description","content":"评价指标与损失函数的区别？ 当建立一个学习算法时，我们希望最大化一个给定的评价指标matric（比如说准确度），但算法在学习过程中会尝试优化一个不同的损失函数loss（比如说MSE/Cross-entropy）。 那为什么不把评价指标matric作为学习算法的损失函数loss呢？ 一般来说，应该尝试优化一个与你最关心的评价指标相对应的损失函数。 例如，..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://github.com/Genhiy/Genhiy.github.io/assets/images/zsk/tech/Snipaste_2024-06-27_14-32-14.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"Genhiy"}],["meta",{"property":"article:tag","content":"评价指标"}],["meta",{"property":"article:published_time","content":"2024-04-24T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"评价指标总结\\",\\"image\\":[\\"https://github.com/Genhiy/Genhiy.github.io/assets/images/zsk/tech/Snipaste_2024-06-27_14-32-14.png\\"],\\"datePublished\\":\\"2024-04-24T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Genhiy\\"}]}"]]},"headers":[{"level":2,"title":"评价指标与损失函数的区别？","slug":"评价指标与损失函数的区别","link":"#评价指标与损失函数的区别","children":[]},{"level":2,"title":"分类问题离线指标","slug":"分类问题离线指标","link":"#分类问题离线指标","children":[{"level":3,"title":"AUC","slug":"auc","link":"#auc","children":[]}]},{"level":2,"title":"A/B实验","slug":"a-b实验","link":"#a-b实验","children":[{"level":3,"title":"基本信息","slug":"基本信息","link":"#基本信息","children":[]},{"level":3,"title":"统计学基础","slug":"统计学基础","link":"#统计学基础","children":[]}]}],"git":{},"readingTime":{"minutes":7.17,"words":2152},"filePathRelative":"zsk/ai/ai_base/eval.md","localizedDate":"2024年4月24日","excerpt":"<h2>评价指标与损失函数的区别？</h2>\\n<p>当建立一个学习算法时，我们希望最大化一个给定的评价指标matric（比如说准确度），但算法在学习过程中会尝试优化一个不同的损失函数loss（比如说MSE/Cross-entropy）。</p>\\n<p>那为什么不把评价指标matric作为学习算法的损失函数loss呢？</p>\\n<ol>\\n<li>\\n<p>一般来说，应该尝试优化一个与你最关心的评价指标相对应的损失函数。</p>\\n<p>例如，在做分类时，我认为你需要给我一个很好的理由，让我不要优化交叉熵。但是，交叉熵并不是一个非常直观的指标，所以一旦你完成了训练，你可能还想知道你的分类准确率有多高，以了解你的模型是否真的能在现实世界中发挥作用。</p>\\n<p>总之，在每个epoch训练完后，你都会有多个评估指标。这样作的主要原因是为了了解你的模型在做什么。这意味着你想要最大化指标A，以便得到一个接近最大化指标B的解决方案。</p>\\n</li>\\n<li>\\n<p>通常情况下，MSE/交叉熵比精度更容易优化，因为它们对模型参数是可微的，在某些情况下甚至是凸的，这使得它更容易。</p>\\n<p>在可微的条件下，或许你还想要梯度更容易计算(交叉熵v.s.dice-coefficient或者IoU)。在语义分割的情况下使用交叉熵而不是dice或者类似的IoU指标，这是因为交叉熵的梯度更好。</p>\\n</li>\\n</ol>","autoDesc":true}');export{j as comp,J as data};
